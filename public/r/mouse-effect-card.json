{
  "name": "mouse-effect-card",
  "type": "registry:component",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [],
  "files": [
    {
      "type": "registry:component",
      "content": "\"use client\";\r\n\r\nimport { motion, useMotionValue, useSpring, useTransform } from \"motion/react\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst SPRING_CONFIG = { stiffness: 300, damping: 30, mass: 0.5 };\r\nconst OPACITY_DURATION_BASE = 0.8;\r\nconst OPACITY_DURATION_VARIATION = 0.2;\r\nconst OPACITY_EASE = [0.4, 0, 0.2, 1] as const;\r\nconst OPACITY_DELAY_CYCLE = 1.5;\r\nconst OPACITY_DELAY_STEP = 0.02;\r\nconst MIN_OPACITY_MULTIPLIER = 0.5;\r\nconst MAX_OPACITY_MULTIPLIER = 1.5;\r\nconst MIN_OPACITY_FALLBACK = 0.3;\r\nconst PROXIMITY_MULTIPLIER = 1.2;\r\nconst PROXIMITY_OPACITY_BOOST = 0.8;\r\n\r\nexport interface MouseEffectCardProps {\r\n  className?: string;\r\n  children?: React.ReactNode;\r\n  dotSize?: number;\r\n  dotSpacing?: number;\r\n  repulsionRadius?: number;\r\n  repulsionStrength?: number;\r\n  title?: string;\r\n  subtitle?: string;\r\n  topText?: string;\r\n  topSubtext?: string;\r\n  primaryCtaText?: string;\r\n  primaryCtaUrl?: string;\r\n  secondaryCtaText?: string;\r\n  secondaryCtaUrl?: string;\r\n  footerText?: string;\r\n}\r\n\r\ninterface Dot {\r\n  id: string;\r\n  x: number;\r\n  y: number;\r\n  baseX: number;\r\n  baseY: number;\r\n  opacity: number;\r\n}\r\n\r\ninterface DotComponentProps {\r\n  dot: Dot;\r\n  index: number;\r\n  dotSize: number;\r\n  mouseX: ReturnType<typeof useMotionValue<number>>;\r\n  mouseY: ReturnType<typeof useMotionValue<number>>;\r\n  repulsionRadius: number;\r\n  repulsionStrength: number;\r\n}\r\n\r\nfunction calculateDistance(\r\n  x1: number,\r\n  y1: number,\r\n  x2: number,\r\n  y2: number,\r\n): number {\r\n  const dx = x1 - x2;\r\n  const dy = y1 - y2;\r\n  return Math.sqrt(dx * dx + dy * dy);\r\n}\r\n\r\nfunction generateDots(width: number, height: number, spacing: number): Dot[] {\r\n  const dots: Dot[] = [];\r\n  const cols = Math.ceil(width / spacing);\r\n  const rows = Math.ceil(height / spacing);\r\n  const centerX = width / 2;\r\n  const centerY = height / 2;\r\n  const maxDistance = Math.sqrt(centerX * centerX + centerY * centerY);\r\n\r\n  for (let row = 0; row <= rows; row++) {\r\n    for (let col = 0; col <= cols; col++) {\r\n      const x = col * spacing;\r\n      const y = row * spacing;\r\n\r\n      const dx = x - centerX;\r\n      const dy = y - centerY;\r\n      const distanceFromCenter = Math.sqrt(dx * dx + dy * dy);\r\n\r\n      const edgeFactor = Math.min(distanceFromCenter / (maxDistance * 0.7), 1);\r\n\r\n      if (Math.random() > edgeFactor) {\r\n        continue;\r\n      }\r\n\r\n      const pattern = (row + col) % 3;\r\n      const baseOpacities = [0.3, 0.5, 0.7];\r\n      const opacity = baseOpacities[pattern] * edgeFactor;\r\n\r\n      dots.push({\r\n        id: `dot-${row}-${col}`,\r\n        x,\r\n        y,\r\n        baseX: x,\r\n        baseY: y,\r\n        opacity,\r\n      });\r\n    }\r\n  }\r\n\r\n  return dots;\r\n}\r\n\r\nfunction DotComponent({\r\n  dot,\r\n  index,\r\n  dotSize,\r\n  mouseX,\r\n  mouseY,\r\n  repulsionRadius,\r\n  repulsionStrength,\r\n}: DotComponentProps) {\r\n  const posX = useTransform([mouseX, mouseY], () => {\r\n    const mx = mouseX.get();\r\n    const my = mouseY.get();\r\n\r\n    if (!(Number.isFinite(mx) && Number.isFinite(my))) {\r\n      return 0;\r\n    }\r\n\r\n    const dx = dot.baseX - mx;\r\n    const dy = dot.baseY - my;\r\n    const distance = Math.sqrt(dx * dx + dy * dy);\r\n\r\n    if (distance < repulsionRadius) {\r\n      const force = (1 - distance / repulsionRadius) * repulsionStrength;\r\n      const angle = Math.atan2(dy, dx);\r\n      return Math.cos(angle) * force;\r\n    }\r\n\r\n    return 0;\r\n  });\r\n\r\n  const posY = useTransform([mouseX, mouseY], () => {\r\n    const mx = mouseX.get();\r\n    const my = mouseY.get();\r\n\r\n    if (!(Number.isFinite(mx) && Number.isFinite(my))) {\r\n      return 0;\r\n    }\r\n\r\n    const dx = dot.baseX - mx;\r\n    const dy = dot.baseY - my;\r\n    const distance = Math.sqrt(dx * dx + dy * dy);\r\n\r\n    if (distance < repulsionRadius) {\r\n      const force = (1 - distance / repulsionRadius) * repulsionStrength;\r\n      const angle = Math.atan2(dy, dx);\r\n      return Math.sin(angle) * force;\r\n    }\r\n\r\n    return 0;\r\n  });\r\n\r\n  const opacityBoost = useTransform([mouseX, mouseY], () => {\r\n    const mx = mouseX.get();\r\n    const my = mouseY.get();\r\n\r\n    if (!(Number.isFinite(mx) && Number.isFinite(my))) return 0;\r\n\r\n    const distance = calculateDistance(dot.baseX, dot.baseY, mx, my);\r\n    const maxDistance = repulsionRadius * PROXIMITY_MULTIPLIER;\r\n\r\n    if (distance < maxDistance) {\r\n      const proximityFactor = 1 - distance / maxDistance;\r\n      return proximityFactor * PROXIMITY_OPACITY_BOOST;\r\n    }\r\n\r\n    return 0;\r\n  });\r\n\r\n  const x = useSpring(posX, SPRING_CONFIG);\r\n  const y = useSpring(posY, SPRING_CONFIG);\r\n\r\n  const baseMinOpacity = Math.max(\r\n    dot.opacity * MIN_OPACITY_MULTIPLIER,\r\n    MIN_OPACITY_FALLBACK,\r\n  );\r\n  const baseMaxOpacity = Math.min(dot.opacity * MAX_OPACITY_MULTIPLIER, 1);\r\n\r\n  const minOpacityWithBoost = useTransform(opacityBoost, (boost) =>\r\n    Math.min(baseMinOpacity + boost, 1),\r\n  );\r\n\r\n  const delay = (index * OPACITY_DELAY_STEP) % OPACITY_DELAY_CYCLE;\r\n\r\n  return (\r\n    <motion.div\r\n      animate={{\r\n        opacity: [baseMinOpacity, baseMaxOpacity, baseMinOpacity],\r\n      }}\r\n      className=\"absolute rounded-full bg-zinc-400 will-change-transform dark:bg-zinc-600\"\r\n      initial={{ opacity: baseMinOpacity }}\r\n      style={{\r\n        width: dotSize,\r\n        height: dotSize,\r\n        left: dot.baseX,\r\n        top: dot.baseY,\r\n        x,\r\n        y,\r\n        opacity: useSpring(minOpacityWithBoost, {\r\n          stiffness: 150,\r\n          damping: 25,\r\n        }),\r\n      }}\r\n      transition={{\r\n        opacity: {\r\n          duration:\r\n            OPACITY_DURATION_BASE + (index % 4) * OPACITY_DURATION_VARIATION,\r\n          repeat: Number.POSITIVE_INFINITY,\r\n          ease: OPACITY_EASE,\r\n          delay,\r\n          times: [0, 0.5, 1],\r\n        },\r\n      }}\r\n    />\r\n  );\r\n}\r\n\r\nexport default function MouseEffectCard({\r\n  className,\r\n  children,\r\n  dotSize = 2,\r\n  dotSpacing = 16,\r\n  repulsionRadius = 80,\r\n  repulsionStrength = 20,\r\n  title = \"Acme\",\r\n  subtitle = \"Build interfaces using Snappy UI\",\r\n  topText = \"Case Study\",\r\n  topSubtext = \"Discover something new\",\r\n  primaryCtaText = \"Get Started\",\r\n  primaryCtaUrl = \"#\",\r\n  secondaryCtaText = \"View Docs\",\r\n  secondaryCtaUrl = \"#\",\r\n  footerText = \"We do it all\",\r\n}: MouseEffectCardProps) {\r\n  const innerContainerRef = useRef<HTMLDivElement>(null);\r\n  const mouseX = useMotionValue(Number.POSITIVE_INFINITY);\r\n  const mouseY = useMotionValue(Number.POSITIVE_INFINITY);\r\n  const [dots, setDots] = useState<Dot[]>([]);\r\n\r\n  useEffect(() => {\r\n    const updateDots = () => {\r\n      if (!innerContainerRef.current) return;\r\n      const rect = innerContainerRef.current.getBoundingClientRect();\r\n      const newDots = generateDots(rect.width, rect.height, dotSpacing);\r\n      setDots(newDots);\r\n    };\r\n\r\n    updateDots();\r\n\r\n    const resizeObserver = new ResizeObserver(updateDots);\r\n    if (innerContainerRef.current) {\r\n      resizeObserver.observe(innerContainerRef.current);\r\n    }\r\n\r\n    return () => {\r\n      resizeObserver.disconnect();\r\n    };\r\n  }, [dotSpacing]);\r\n\r\n  const handleMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {\r\n    if (!innerContainerRef.current) return;\r\n\r\n    const rect = innerContainerRef.current.getBoundingClientRect();\r\n    const x = e.clientX - rect.left;\r\n    const y = e.clientY - rect.top;\r\n\r\n    mouseX.set(x);\r\n    mouseY.set(y);\r\n  };\r\n\r\n  const handleMouseLeave = () => {\r\n    mouseX.set(Number.POSITIVE_INFINITY);\r\n    mouseY.set(Number.POSITIVE_INFINITY);\r\n  };\r\n\r\n  return (\r\n    <Card\r\n      className={cn(\r\n        \"relative w-full max-w-md overflow-hidden rounded-2xl border border-white/40 p-0 shadow-none dark:border-white/10\",\r\n        className,\r\n      )}\r\n    >\r\n      <CardContent\r\n        className=\"relative h-[400px] w-full overflow-hidden p-0\"\r\n        onMouseLeave={handleMouseLeave}\r\n        onMouseMove={handleMouseMove}\r\n        ref={innerContainerRef}\r\n      >\r\n        {dots.map((dot, index) => (\r\n          <DotComponent\r\n            dot={dot}\r\n            dotSize={dotSize}\r\n            index={index}\r\n            key={dot.id}\r\n            mouseX={mouseX}\r\n            mouseY={mouseY}\r\n            repulsionRadius={repulsionRadius}\r\n            repulsionStrength={repulsionStrength}\r\n          />\r\n        ))}\r\n\r\n        {topText && (\r\n          <div className=\"absolute top-6 left-6 z-10\">\r\n            <div className=\"relative\">\r\n              <div className=\"absolute inset-0 rounded-lg bg-white/60 blur-lg dark:bg-zinc-950/60\" />\r\n              <div className=\"relative flex flex-col gap-1\">\r\n                <p className=\"font-bold text-sm text-zinc-900 dark:text-white\">\r\n                  {topText}\r\n                </p>\r\n                {topSubtext && (\r\n                  <p className=\"font-medium text-xs text-zinc-600 opacity-70 dark:text-zinc-400\">\r\n                    {topSubtext}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"relative z-10 flex h-full flex-col items-center justify-center px-2\">\r\n          <div className=\"flex flex-col items-center gap-6\">\r\n            <div className=\"relative\">\r\n              <div className=\"absolute inset-0 rounded-full bg-white/80 blur-2xl dark:bg-zinc-950/80\" />\r\n              <h2 className=\"relative text-center font-bold text-4xl text-zinc-900 tracking-tight dark:text-white\">\r\n                {title}\r\n              </h2>\r\n            </div>\r\n            {(subtitle || children) && (\r\n              <div className=\"relative\">\r\n                <div className=\"absolute inset-0 rounded-lg bg-white/60 blur-xl dark:bg-zinc-950/60\" />\r\n                <p className=\"relative max-w-sm text-center font-medium text-base text-zinc-700 leading-relaxed dark:text-zinc-300\">\r\n                  {children || subtitle}\r\n                </p>\r\n              </div>\r\n            )}\r\n            <div className=\"mt-2 flex items-center gap-3\">\r\n              <Button asChild className=\"rounded-full shadow-lg\" size=\"lg\">\r\n                <a\r\n                  href={primaryCtaUrl}\r\n                  onClick={(e) => {\r\n                    if (primaryCtaUrl === \"#\") {\r\n                      e.preventDefault();\r\n                    }\r\n                  }}\r\n                >\r\n                  {primaryCtaText}\r\n                </a>\r\n              </Button>\r\n              {secondaryCtaText && (\r\n                <Button\r\n                  asChild\r\n                  className=\"rounded-full\"\r\n                  size=\"lg\"\r\n                  variant=\"outline\"\r\n                >\r\n                  <a\r\n                    href={secondaryCtaUrl}\r\n                    onClick={(e) => {\r\n                      if (secondaryCtaUrl === \"#\") {\r\n                        e.preventDefault();\r\n                      }\r\n                    }}\r\n                  >\r\n                    {secondaryCtaText}\r\n                  </a>\r\n                </Button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {footerText && (\r\n          <div className=\"absolute right-0 bottom-6 left-0 z-10 flex justify-center\">\r\n            <div className=\"relative\">\r\n              <div className=\"absolute inset-0 rounded-full bg-white/60 blur-lg dark:bg-zinc-950/60\" />\r\n              <p className=\"relative px-4 py-1 font-medium text-xs text-zinc-600 dark:text-zinc-400\">\r\n                {footerText}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n",
      "path": "/components/snappyui/mouse-effect-card.tsx",
      "target": "/components/snappyui/mouse-effect-card.tsx"
    }
  ]
}